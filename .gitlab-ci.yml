image: docker:latest

# Variable for performance enhancements
variables:
  DOCKER_DRIVER: overlay
  
# Services required for running
services:
  - docker:dind
  - gcc:latest

# Before script excecutes before stages
before_script:
  - apk --update add python py-pip openssl ca-certificates py-openssl wget
  - apk --update add --virtual build-dependencies libffi-dev openssl-dev python-dev py-pip build-base
  - apk add --no-cache python py2-pip
  - pip install --no-cache-dir docker-compose
  - docker-compose -v

stages:
  - test
  
test:
  tags:
    - docker
  stage: test
  script:
    - docker-compose -v